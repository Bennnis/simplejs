<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Update</title>
    <script src="../../dist/bundle.js"></script>
</head>
<body>
<div id="app"></div>
<script>
	// TODO: 1. how to use prop beautiful ? ({props.msg} || {prop.msg} || {msg} must filter key with state)
	// TODO: 2. how to deal with props mutation
	// TODO: 3. how to update component by props' mutation
	// TODO: 4. props option level (if child component could mutate the parent prop)
	// TODO: 5. pass prop (from self's parent to self's child) in a convenient way

	let childComponent1 = new Simple({
		state: {
			msg: 'I am child 1',
		},

		render: function (h) {
			setTimeout(() => {
				this.unmountComponent()
			}, 3000)

			return h(`<div id="child">
		           <p>Message from State: {msg}</p>
		           <p>Message from Props: {think}</p>
		       </div>`)
		}
	})

	let childComponent2 = new Simple({
		state: {
			msg: 'I am child "2"',
			count: 0
		},

		render: function (h) {
			setInterval(() => {
				this.setState({
					count: this.state.count + 1
				})
			}, 1000)
			return h(`<div id="child">
		           <p>Message: {msg} - Counter: {count}</p>
		       </div>`)
		}
	})

	let component = new Simple({
		components: {
			'child-one': childComponent1,
			'child-two': childComponent2,
		},
		state: {
			version: 'v1.0.0',
			name: 'Simple Js',
			obj: [
				{name: 'in obj'}
			],
			count: 0,
			count2: 10
		},

		render: function (h) {
			setInterval(() => {
				this.setState({
					count: this.state.count + 1,
					count2: this.state.count + 1
				})
			}, 1000)
			return h(`<div id="parent">
                <p>Welcome to {name}</p>
                <p>{"version: " + version}</p>
                <p>You are stay for {count}s</p>
                <child-one :think="count + count2"></child-one>
                <child-two></child-two>
            </div>`)
		}
	})


	Simple.mount('#app', component)
</script>
</body>
</html>